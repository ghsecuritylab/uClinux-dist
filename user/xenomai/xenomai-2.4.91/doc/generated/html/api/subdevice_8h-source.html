<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Xenomai API: include/comedi/subdevice.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>include/comedi/subdevice.h</h1><a href="subdevice_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00023"></a>00023 <span class="preprocessor">#ifndef __COMEDI_SUBDEVICE__</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor">#define __COMEDI_SUBDEVICE__</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span>
<a name="l00026"></a>00026 <span class="preprocessor">#ifdef __KERNEL__</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span><span class="preprocessor">#include &lt;linux/list.h&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#endif </span><span class="comment">/* __KERNEL__ */</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="comedi_2types_8h.html" title="Comedi for RTDM, misc declarations.">comedi/types.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="context_8h.html" title="Comedi for RTDM, context structure / macros declarations.">comedi/context.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="instruction_8h.html" title="Comedi for RTDM, instruction related features.">comedi/instruction.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="command_8h.html" title="Comedi for RTDM, driver facilities.">comedi/command.h</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="channel__range_8h.html" title="Comedi for RTDM, channel, range related features.">comedi/channel_range.h</a>&gt;</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="comment">/* --- Subdevice flags desc stuff --- */</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="comment">/* TODO: replace COMEDI_SUBD_AI with COMEDI_SUBD_ANALOG</span>
<a name="l00039"></a>00039 <span class="comment">   and COMEDI_SUBD_INPUT */</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="comment">/* Subdevice types masks */</span>
<a name="l00042"></a>00042 <span class="preprocessor">#define COMEDI_SUBD_MASK_READ 0x80000000</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span><span class="preprocessor">#define COMEDI_SUBD_MASK_WRITE 0x40000000</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">#define COMEDI_SUBD_MASK_SPECIAL 0x20000000</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00060"></a><a class="code" href="group__subdevice.html#g61f461f011fc27b10f297af666ca264f">00060</a> <span class="preprocessor">#define COMEDI_SUBD_UNUSED (COMEDI_SUBD_MASK_SPECIAL|0x1)</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span>
<a name="l00064"></a><a class="code" href="group__subdevice.html#g4eb969ec6756edb622b5dac3f4cb8a55">00064</a> <span class="preprocessor">#define COMEDI_SUBD_AI (COMEDI_SUBD_MASK_READ|0x2)</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span>
<a name="l00068"></a><a class="code" href="group__subdevice.html#gcc737ec2760404aed3e2dbea8b9b6bf3">00068</a> <span class="preprocessor">#define COMEDI_SUBD_AO (COMEDI_SUBD_MASK_WRITE|0x4)</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span>
<a name="l00072"></a><a class="code" href="group__subdevice.html#g335de91ceb769d96063d670c1d0dbf14">00072</a> <span class="preprocessor">#define COMEDI_SUBD_DI (COMEDI_SUBD_MASK_READ|0x8)</span>
<a name="l00073"></a>00073 <span class="preprocessor"></span>
<a name="l00076"></a><a class="code" href="group__subdevice.html#g2b34365739de915ce20f5f32ccd419a1">00076</a> <span class="preprocessor">#define COMEDI_SUBD_DO (COMEDI_SUBD_MASK_WRITE|0x10)</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00080"></a><a class="code" href="group__subdevice.html#g6146c785477852594f00f4f0f4de5bf4">00080</a> <span class="preprocessor">#define COMEDI_SUBD_DIO (COMEDI_SUBD_MASK_SPECIAL|0x20)</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span>
<a name="l00084"></a><a class="code" href="group__subdevice.html#gcbf136049bc1a900163a254d588d1af3">00084</a> <span class="preprocessor">#define COMEDI_SUBD_COUNTER (COMEDI_SUBD_MASK_SPECIAL|0x40)</span>
<a name="l00085"></a>00085 <span class="preprocessor"></span>
<a name="l00088"></a><a class="code" href="group__subdevice.html#gd317936df9818a69520872f550e811c9">00088</a> <span class="preprocessor">#define COMEDI_SUBD_TIMER (COMEDI_SUBD_MASK_SPECIAL|0x80)</span>
<a name="l00089"></a>00089 <span class="preprocessor"></span>
<a name="l00092"></a><a class="code" href="group__subdevice.html#g781ad0e553cc6383f2dec8caff875839">00092</a> <span class="preprocessor">#define COMEDI_SUBD_MEMORY (COMEDI_SUBD_MASK_SPECIAL|0x100)</span>
<a name="l00093"></a>00093 <span class="preprocessor"></span>
<a name="l00096"></a><a class="code" href="group__subdevice.html#g6450e472633ae87b94e0d6293fb73070">00096</a> <span class="preprocessor">#define COMEDI_SUBD_CALIB (COMEDI_SUBD_MASK_SPECIAL|0x200)</span>
<a name="l00097"></a>00097 <span class="preprocessor"></span>
<a name="l00100"></a><a class="code" href="group__subdevice.html#gbf122bc3670138369bcd8bca808836b3">00100</a> <span class="preprocessor">#define COMEDI_SUBD_PROC (COMEDI_SUBD_MASK_SPECIAL|0x400)</span>
<a name="l00101"></a>00101 <span class="preprocessor"></span>
<a name="l00104"></a><a class="code" href="group__subdevice.html#gf4d277cfe19cea4e452e2bf6744d86f9">00104</a> <span class="preprocessor">#define COMEDI_SUBD_SERIAL (COMEDI_SUBD_MASK_SPECIAL|0x800)</span>
<a name="l00105"></a>00105 <span class="preprocessor"></span>
<a name="l00108"></a><a class="code" href="group__subdevice.html#gd72bb066a073ac8b7cdd5a2860014b1a">00108</a> <span class="preprocessor">#define COMEDI_SUBD_TYPES (COMEDI_SUBD_UNUSED | \</span>
<a name="l00109"></a>00109 <span class="preprocessor">                           COMEDI_SUBD_AI | \</span>
<a name="l00110"></a>00110 <span class="preprocessor">                           COMEDI_SUBD_AO | \</span>
<a name="l00111"></a>00111 <span class="preprocessor">                           COMEDI_SUBD_DI | \</span>
<a name="l00112"></a>00112 <span class="preprocessor">                           COMEDI_SUBD_DO | \</span>
<a name="l00113"></a>00113 <span class="preprocessor">                           COMEDI_SUBD_DIO | \</span>
<a name="l00114"></a>00114 <span class="preprocessor">                           COMEDI_SUBD_COUNTER | \</span>
<a name="l00115"></a>00115 <span class="preprocessor">                           COMEDI_SUBD_CALIB | \</span>
<a name="l00116"></a>00116 <span class="preprocessor">                           COMEDI_SUBD_PROC | \</span>
<a name="l00117"></a>00117 <span class="preprocessor">                           COMEDI_SUBD_SERIAL)</span>
<a name="l00118"></a>00118 <span class="preprocessor"></span>
<a name="l00127"></a>00127 <span class="comment">/* Subdevice capabilities */</span>
<a name="l00132"></a><a class="code" href="group__subdevice.html#gd5f561feddd1a076c430c78452baa8e1">00132</a> <span class="preprocessor">#define COMEDI_SUBD_CMD 0x1000</span>
<a name="l00133"></a>00133 <span class="preprocessor"></span>
<a name="l00138"></a><a class="code" href="group__subdevice.html#ge92928cf8a5d9bea282702e20e68de71">00138</a> <span class="preprocessor">#define COMEDI_SUBD_MMAP 0x8000</span>
<a name="l00139"></a>00139 <span class="preprocessor"></span>
<a name="l00142"></a>00142 <span class="preprocessor">#ifdef __KERNEL__</span>
<a name="l00143"></a>00143 <span class="preprocessor"></span>
<a name="l00144"></a>00144 <span class="comment">/* --- Subdevice descriptor structure --- */</span>
<a name="l00145"></a>00145 
<a name="l00146"></a>00146 <span class="keyword">struct </span>comedi_device;
<a name="l00147"></a>00147 <span class="keyword">struct </span><a class="code" href="structcomedi__driver.html" title="Structure containing driver declaration data.">comedi_driver</a>;
<a name="l00148"></a>00148 
<a name="l00154"></a><a class="code" href="structcomedi__subdevice.html">00154</a> <span class="keyword">struct </span><a class="code" href="structcomedi__subdevice.html" title="Structure describing the subdevice.">comedi_subdevice</a> {
<a name="l00155"></a>00155 
<a name="l00156"></a><a class="code" href="structcomedi__subdevice.html#0471686b1184b2a1a709b8609789298b">00156</a>         <span class="keyword">struct </span>list_head <a class="code" href="structcomedi__subdevice.html#0471686b1184b2a1a709b8609789298b" title="List stuff.">list</a>;
<a name="l00159"></a>00159         <span class="comment">/* Descriptors stuff */</span>
<a name="l00160"></a>00160         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structcomedi__subdevice.html#362f19da928fd310fc9142d59a902f9e" title="Type flags.">flags</a>;
<a name="l00162"></a>00162         <a class="code" href="structcomedi__channels__desc.html" title="Structure describing a channels set.">comedi_chdesc_t</a> *<a class="code" href="structcomedi__subdevice.html#0a0de718d4a90e63d2c1f17b317ae5a3" title="Tab of channels descriptors pointers.">chan_desc</a>;
<a name="l00164"></a>00164         comedi_rngdesc_t *<a class="code" href="structcomedi__subdevice.html#090a55036a369692f87d448ba0b55926" title="Tab of ranges descriptors pointers.">rng_desc</a>;
<a name="l00166"></a>00166         <a class="code" href="structcomedi__cmd__desc.html" title="Structure describing the asynchronous instruction.">comedi_cmd_t</a> *<a class="code" href="structcomedi__subdevice.html#4bc7b9f78551d997a84911fb3eccb05b" title="Command capabilities mask.">cmd_mask</a>;
<a name="l00169"></a>00169         <span class="comment">/* Functions stuff */</span>
<a name="l00170"></a>00170         int (*<a class="code" href="structcomedi__subdevice.html#e1dbcc9d7d28eb22bee685a802fb6a62" title="Callback for the instruction &amp;quot;read&amp;quot;.">insn_read</a>) (comedi_cxt_t *, comedi_kinsn_t *);
<a name="l00172"></a>00172         int (*<a class="code" href="structcomedi__subdevice.html#c975b653cf26876c7af7e8d068b85d37" title="Callback for the instruction &amp;quot;write&amp;quot;.">insn_write</a>) (comedi_cxt_t *, comedi_kinsn_t *);
<a name="l00174"></a>00174         int (*<a class="code" href="structcomedi__subdevice.html#90084a3d8f4895466e5157cacf5306e7" title="Callback for the instruction &amp;quot;bits&amp;quot;.">insn_bits</a>) (comedi_cxt_t *, comedi_kinsn_t *);
<a name="l00176"></a>00176         int (*<a class="code" href="structcomedi__subdevice.html#deb7061da5e5e223933ca7491ca8c9c6" title="Callback for the configuration instruction.">insn_config</a>) (comedi_cxt_t *, comedi_kinsn_t *);
<a name="l00178"></a>00178         int (*<a class="code" href="structcomedi__subdevice.html#c14088335c7f94cadaf19537a7a81099" title="Callback for command handling.">do_cmd</a>) (comedi_cxt_t *, int);
<a name="l00180"></a>00180         int (*<a class="code" href="structcomedi__subdevice.html#00d6b2c868b7e04304b1876b0297180b" title="Callback for command checking.">do_cmdtest</a>) (comedi_cxt_t *, <a class="code" href="structcomedi__cmd__desc.html" title="Structure describing the asynchronous instruction.">comedi_cmd_t</a> *);
<a name="l00182"></a>00182         int (*<a class="code" href="structcomedi__subdevice.html#bbf1992d7fd42d63d32cf4a49e83fbd2" title="Callback for asynchronous transfer cancellation.">cancel</a>) (comedi_cxt_t *, int);
<a name="l00184"></a>00184         void (*<a class="code" href="structcomedi__subdevice.html#3a2cb5c5c41889180c55f8df3eaa4ece" title="Callback for munge operation.">munge</a>) (comedi_cxt_t *, int, <span class="keywordtype">void</span> *, <span class="keywordtype">unsigned</span> long);
<a name="l00186"></a>00186         int (*<a class="code" href="structcomedi__subdevice.html#0d53057988a68a85a1f7f90c3cb66af1" title="Callback for trigger operation.">trigger</a>) (comedi_cxt_t *, lsampl_t);
<a name="l00189"></a>00189 };
<a name="l00190"></a>00190 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structcomedi__subdevice.html" title="Structure describing the subdevice.">comedi_subdevice</a> <a class="code" href="structcomedi__subdevice.html" title="Structure describing the subdevice.">comedi_subd_t</a>;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192 <span class="preprocessor">#endif </span><span class="comment">/* __KERNEL__ */</span>
<a name="l00193"></a>00193 
<a name="l00196"></a>00196 <span class="preprocessor">#ifndef DOXYGEN_CPP</span>
<a name="l00197"></a>00197 <span class="preprocessor"></span>
<a name="l00198"></a>00198 <span class="comment">/* --- Subdevice related IOCTL arguments structures --- */</span>
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 <span class="comment">/* SUDBINFO IOCTL argument */</span>
<a name="l00201"></a>00201 <span class="keyword">struct </span>comedi_subd_info {
<a name="l00202"></a>00202         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags;
<a name="l00203"></a>00203         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> status;
<a name="l00204"></a>00204         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> nb_chan;
<a name="l00205"></a>00205 };
<a name="l00206"></a>00206 <span class="keyword">typedef</span> <span class="keyword">struct </span>comedi_subd_info comedi_sbinfo_t;
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 <span class="comment">/* CHANINFO / NBCHANINFO IOCTL arguments */</span>
<a name="l00209"></a>00209 <span class="keyword">struct </span>comedi_chan_info {
<a name="l00210"></a>00210         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> chan_flags;
<a name="l00211"></a>00211         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> nb_rng;
<a name="l00212"></a>00212         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> nb_bits;
<a name="l00213"></a>00213 };
<a name="l00214"></a>00214 <span class="keyword">typedef</span> <span class="keyword">struct </span>comedi_chan_info comedi_chinfo_t;
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 <span class="keyword">struct </span>comedi_chinfo_arg {
<a name="l00217"></a>00217         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> idx_subd;
<a name="l00218"></a>00218         <span class="keywordtype">void</span> *info;
<a name="l00219"></a>00219 };
<a name="l00220"></a>00220 <span class="keyword">typedef</span> <span class="keyword">struct </span>comedi_chinfo_arg comedi_chinfo_arg_t;
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 <span class="comment">/* RNGINFO / NBRNGINFO IOCTL arguments */</span>
<a name="l00223"></a>00223 <span class="keyword">struct </span>comedi_rng_info {
<a name="l00224"></a>00224         <span class="keywordtype">long</span> min;
<a name="l00225"></a>00225         <span class="keywordtype">long</span> max;
<a name="l00226"></a>00226         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags;
<a name="l00227"></a>00227 };
<a name="l00228"></a>00228 <span class="keyword">typedef</span> <span class="keyword">struct </span>comedi_rng_info comedi_rnginfo_t;
<a name="l00229"></a>00229 
<a name="l00230"></a>00230 <span class="keyword">struct </span>comedi_rng_info_arg {
<a name="l00231"></a>00231         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> idx_subd;
<a name="l00232"></a>00232         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> idx_chan;
<a name="l00233"></a>00233         <span class="keywordtype">void</span> *info;
<a name="l00234"></a>00234 };
<a name="l00235"></a>00235 <span class="keyword">typedef</span> <span class="keyword">struct </span>comedi_rng_info_arg comedi_rnginfo_arg_t;
<a name="l00236"></a>00236 
<a name="l00237"></a>00237 <span class="preprocessor">#ifdef __KERNEL__</span>
<a name="l00238"></a>00238 <span class="preprocessor"></span>
<a name="l00239"></a>00239 <span class="comment">/* --- Subdevice related functions --- */</span>
<a name="l00240"></a>00240 <a class="code" href="structcomedi__channel.html" title="Structure describing some channel&amp;#39;s characteristics.">comedi_chan_t</a> *comedi_get_chfeat(<a class="code" href="structcomedi__subdevice.html" title="Structure describing the subdevice.">comedi_subd_t</a> * sb, <span class="keywordtype">int</span> idx);
<a name="l00241"></a>00241 <a class="code" href="structcomedi__range.html" title="Structure describing a (unique) range.">comedi_rng_t</a> *comedi_get_rngfeat(<a class="code" href="structcomedi__subdevice.html" title="Structure describing the subdevice.">comedi_subd_t</a> * sb,
<a name="l00242"></a>00242                                       <span class="keywordtype">int</span> chidx, <span class="keywordtype">int</span> rngidx);
<a name="l00243"></a>00243 <span class="keywordtype">int</span> comedi_check_chanlist(<a class="code" href="structcomedi__subdevice.html" title="Structure describing the subdevice.">comedi_subd_t</a> * subd,
<a name="l00244"></a>00244                           <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> nb_chan, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *chans);
<a name="l00245"></a>00245 
<a name="l00246"></a>00246 <span class="comment">/* --- Upper layer functions --- */</span>
<a name="l00247"></a>00247 <span class="keywordtype">int</span> <a class="code" href="group__subdevice.html#g17991e69f212d34918a84ad6f19b0dad" title="Add a subdevice to the driver descriptor.">comedi_add_subd</a>(<span class="keyword">struct</span> <a class="code" href="structcomedi__driver.html" title="Structure containing driver declaration data.">comedi_driver</a> *drv, <a class="code" href="structcomedi__subdevice.html" title="Structure describing the subdevice.">comedi_subd_t</a> * subd);
<a name="l00248"></a>00248 <span class="keywordtype">int</span> <a class="code" href="group__subdevice.html#gf4e936e55a42bf1076c9ef65468e9f53" title="Get the channels count registered on a specific subdevice.">comedi_get_nbchan</a>(<span class="keyword">struct</span> comedi_device *dev, <span class="keywordtype">int</span> subd_key);
<a name="l00249"></a>00249 <span class="keywordtype">int</span> comedi_ioctl_subdinfo(comedi_cxt_t * cxt, <span class="keywordtype">void</span> *arg);
<a name="l00250"></a>00250 <span class="keywordtype">int</span> comedi_ioctl_chaninfo(comedi_cxt_t * cxt, <span class="keywordtype">void</span> *arg);
<a name="l00251"></a>00251 <span class="keywordtype">int</span> comedi_ioctl_rnginfo(comedi_cxt_t * cxt, <span class="keywordtype">void</span> *arg);
<a name="l00252"></a>00252 <span class="keywordtype">int</span> comedi_ioctl_nbchaninfo(comedi_cxt_t * cxt, <span class="keywordtype">void</span> *arg);
<a name="l00253"></a>00253 <span class="keywordtype">int</span> comedi_ioctl_nbrnginfo(comedi_cxt_t * cxt, <span class="keywordtype">void</span> *arg);
<a name="l00254"></a>00254 
<a name="l00255"></a>00255 <span class="preprocessor">#endif </span><span class="comment">/* __KERNEL__ */</span>
<a name="l00256"></a>00256 
<a name="l00257"></a>00257 <span class="preprocessor">#endif </span><span class="comment">/* !DOXYGEN_CPP */</span>
<a name="l00258"></a>00258 
<a name="l00259"></a>00259 <span class="preprocessor">#endif </span><span class="comment">/* __COMEDI_SUBDEVICE__ */</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Jun 18 13:51:00 2009 for Xenomai API by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
