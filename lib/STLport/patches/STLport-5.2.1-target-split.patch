https://sourceforge.net/tracker/?func=detail&aid=2888816&group_id=146814&atid=766244

--- STLport-5.2.1/build/Makefiles/gmake/sysid.mak
+++ STLport-5.2.1/build/Makefiles/gmake/sysid.mak
@@ -45,9 +45,9 @@
 endif
 
 else
-OSNAME := $(shell echo ${TARGET_OS} | sed 's/^[a-z0-9_]\+-[a-z0-9]\+-\([a-z]\+\).*/\1/' | sed 's/^[a-z0-9_]\+-\([a-z]\+\).*/\1/' )
+OSNAME := $(shell echo ${TARGET_OS} | awk -F- '{ if (NF > 2) NF--; print $$NF }' | sed s:uclinux:linux:)
 OSREL  := $(shell echo ${TARGET_OS} | sed 's/^[[:alnum:]_]\+-[a-z0-9]\+-[a-z]\+\([a-zA-Z.0-9]*\).*/\1/' | sed 's/^[a-z0-9_]\+-[a-z]\+\([a-zA-Z.0-9]*\).*/\1/' )
-M_ARCH := $(shell echo ${TARGET_OS} | sed 's/^\([a-z0-9_]\+\)-.*/\1/' )
+M_ARCH := $(shell echo ${TARGET_OS} | awk -F- '{ print $$1 }')
 P_ARCH := unknown
 # TARGET_OS
 endif
